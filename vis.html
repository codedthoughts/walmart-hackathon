<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Lorenz Butterfly ‚Äì Chaos Simulation</title>
<style>
  html, body {
    margin: 0;
    background: #05060a;
    overflow: hidden;
    font-family: system-ui, sans-serif;
    color: white;
  }

  #ui {
    position: fixed;
    top: 14px;
    left: 14px;
    background: rgba(15, 20, 30, 0.85);
    padding: 14px 18px;
    border-radius: 14px;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
  }

  button {
    width: 100%;
    padding: 8px;
    border-radius: 8px;
    border: none;
    background: #ff4f9a;
    color: white;
    font-size: 14px;
    cursor: pointer;
    margin-top: 10px;
  }

  button:hover {
    background: #ff6cab;
  }

  #info {
    font-size: 13px;
    opacity: 0.8;
    margin-top: 6px;
  }
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="ui">
  <strong>Lorenz Attractor</strong>
  <div id="info">œÉ=10, œÅ=28, Œ≤=8/3</div>
  <button id="snap">üì∏ Snapshot</button>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let width, height, dpr;

function resize() {
  dpr = window.devicePixelRatio || 1;
  width = window.innerWidth;
  height = window.innerHeight;

  canvas.width = width * dpr;
  canvas.height = height * dpr;
  canvas.style.width = width + "px";
  canvas.style.height = height + "px";

  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

  ctx.fillStyle = "#05060a";
  ctx.fillRect(0, 0, width, height);
}

resize();
window.addEventListener("resize", resize);

// Lorenz parameters (classic chaotic values)
const sigma = 10;
const rho = 28;
const beta = 8 / 3;

// Initial state
let x = 0.01, y = 0, z = 0;

// Time step
const dt = 0.008;

// Visual scaling
const scale = 10;

// Fixed center (CSS pixels)
const cx = () => width / 2;
const cy = () => height / 2;

// Color by velocity
function color(speed) {
  const hue = 280 - speed * 25;
  return `hsl(${hue}, 100%, 60%)`;
}

function step() {
  for (let i = 0; i < 6; i++) {
    const dx = sigma * (y - x);
    const dy = x * (rho - z) - y;
    const dz = x * y - beta * z;

    x += dx * dt;
    y += dy * dt;
    z += dz * dt;

    const px = cx() + x * scale;
    const zOffset = 25; // Lorenz attractor vertical center
    const py = cy() - (z - zOffset) * scale;


    const speed = Math.sqrt(dx*dx + dy*dy + dz*dz) * 0.02;
    ctx.fillStyle = color(speed);
    ctx.fillRect(px, py, 1.5, 1.5);
  }

  requestAnimationFrame(step);
}

step();

// Snapshot
document.getElementById("snap").addEventListener("click", () => {
  const a = document.createElement("a");
  a.download = "lorenz-butterfly.png";
  a.href = canvas.toDataURL("image/png");
  a.click();
});
</script>


</body>
</html>
